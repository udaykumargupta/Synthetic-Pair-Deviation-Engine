# Documentation

## Technical Documentation
### Architecture Overview and Design Decisions
#### ğŸ”§ Modular & Extensible Design
- Exchange Clients: Each exchange (Binance, OKX, Bybit) has a dedicated client (BinanceClient, OKXClient, etc.) that establishes a real-time WebSocket connection to stream market data (spot/perpetual).
- Market Data Aggregator: Centralized, thread-safe buffer that aggregates and synchronizes incoming order book data across all exchanges.
- Synthetic Instrument Engine: Computes synthetic prices using real spot/funding/carry data:
  -Spot + funding â†’ synthetic perpetual
  -Spot + carry â†’ synthetic future
-Arbitrage Engine: Detects mispricings, calculates spread thresholds, evaluates leg capital allocation, and triggers trade execution.
-Risk Manager: Assesses slippage, correlation risk, funding volatility, and depth of book before trades.
-Performance Monitor: Captures latency, throughput, trade logs, and VaR statistics for real-time observability.
-Risk Engine:
 Evaluates trades based on:
  -Depth/liquidity
  -Slippage
  -Funding volatility
  -VaR estimates
  Performance Monitor:
  Tracks:
    -Latency per cycle
    -Throughput
    -System health
    -P&L summaries

âœ… All components are loosely coupled and can be extended to support additional exchanges or trading strategies.

### Component Interaction Flow

                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Exchange Clients     â”‚
                  â”‚ Binance | Bybit | OKX  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                       Real-Time WebSocket Feeds
                               â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   MarketDataAggregator  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                        â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Synthetic â”‚         â”‚ Arbitrage Engineâ”‚        â”‚ Risk Manager   â”‚
â”‚  Engine   â”‚         â”‚ + Optimizer     â”‚        â”‚ + VaR + Stress â”‚
â””â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                                  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º TradeExecutor + PerformanceMonitor â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        (Executes and Logs Trades)                 â”‚
                              â”‚                                    â”‚
                         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ Output  â”‚                        â”‚ P&L + Metricsâ”‚
                         â”‚ Console â”‚                        â”‚   Reports    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### Synthetic Pricing Models
 **Synthetic Perpetual**
   Synthetic Price = Spot Price + Funding Adjustment
 **Synthetic Future**
   Future Price = Spot Price Ã— (1 + r Ã— T / 365)
   r: Interest rate / carry cost
   T: Days until expiry

### Threading and Concurrency Strategy
-Each exchange client runs in a dedicated thread and pushes updates to the central aggregator.
-The main decision loop runs every 2 seconds and:
  -Computes synthetic instruments
  -Checks for mispricings
  -Executes arbitrage if risk conditions are met

  **Code Snippet-**
  std::thread(binanceClient.connect()).detach();
  std::thread(bybitClient.connect()).detach();
  std::thread(okxClient.connect()).detach();
  // Main loop
  while (true) {
     aggregator.getLatestUpdates();
     computeSyntheticPrices();
     detectArbitrage();
     std::this_thread::sleep_for(2s);
  }

  ### Build System and Setup
  -CMake Build:The project uses CMake for cross-platform compilation and dependency management.
  -Dependencies
    -WebSocket++: For handling real-time WebSocket connections.
    -Asio (standalone): For async networking.
    -nlohmann/json: High-performance JSON parsing.
    -spdlog (optional): For logging and tracing.
    -Threads: For multithreading across exchanges.
   All dependencies are included via CMakeLists.txt or vcpkg integration.

 ### Extensibility
-Add New Exchange
  -Create a new class NewExchangeClient inheriting from ExchangeClient.
  -Implement connect(), setOrderBookCallback(), and WebSocket message parsing logic.
  -Register it inside main() and wire it to the aggregator.
-Add New Strategy
  -Create new strategy class or module (e.g., VolatilityArbitrage, CrossAssetArb)
  -Invoke in main loop after data synchronization.
  -Use synthetic calculators and risk manager utilities for leg optimization.

### Project Folder Structure
ğŸ“ SYNTHETICPAIRDEVIATIONENGINE
â”œâ”€â”€ ğŸ“ src
â”‚   â”œâ”€â”€ ğŸ“ arbitrage
â”‚   â”‚   â”œâ”€â”€ ğŸ“ options
â”‚   â”‚   â”‚   â”œâ”€â”€ OptionPricer.hpp/.cpp
â”‚   â”‚   â”‚   â””â”€â”€ VolatilityArbitrageDetector.hpp
â”‚   â”‚   â”œâ”€â”€ ğŸ“ Risk
â”‚   â”‚   â”‚   â”œâ”€â”€ CorrelationAnalyzer.hpp
â”‚   â”‚   â”‚   â”œâ”€â”€ PositionManager.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ ArbitrageLegOptimizer.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ ArbitrageOpportunity.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ LiquidityAnalyzer.cpp/.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ MarketImpactEstimator.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ RiskManager.cpp/.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ StatisticalArbitrageEngine.cpp/.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ SyntheticInstrumentCalculator.cpp/.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ TradeExecutor.cpp/.hpp
â”‚   â”‚   â”‚â”€â”€â”€â”€ VolatilityArbitrage.cpp/.hpp
â”‚   â”œâ”€â”€ ğŸ“ exchange
â”‚   â”‚   â”œâ”€â”€ BinanceClient.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ BinancePerpClient.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ BybitClient.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ OKXClient.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ ExchangeClient.hpp
â”‚   â”‚   â”œâ”€â”€ MarketDataAggregator.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ MarketDataStore.cpp/.hpp
â”‚   â”‚   â””â”€â”€ MarketDataTypes.hpp
â”‚   â”œâ”€â”€ ğŸ“ monitoring
â”‚   â”‚   â”œâ”€â”€ PerformanceMonitor.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ RiskDashboard.cpp/.hpp
â”‚   â”‚   â”œâ”€â”€ StressSimulator.hpp
â”‚   â”‚   â”œâ”€â”€ StressTester.cpp/.hpp
â”‚   â”‚   â””â”€â”€ VaREstimator.cpp/.hpp
â”‚   â”œâ”€â”€ ğŸ“ utils
â”‚   â””â”€â”€ main.cpp
â”‚
â”œâ”€â”€ ğŸ“ tests
â”œâ”€â”€ ğŸ“ vcpkg
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ CMakePresets.json
â”œâ”€â”€ executed_trades.csv
â””â”€â”€ README.md

### Summary
This backend engine demonstrates:
-Real-time synthetic derivative pricing
-Cross-exchange arbitrage with capital-efficient leg building
-Modular risk monitoring
-Clean multithreaded design
-Easy-to-extend strategy architecture


